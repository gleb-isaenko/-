<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°–∏–ª–∞ –¢–µ–º—Ä—è–≤–∏</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #eee;
      padding: 20px;
    }
    section {
      margin-bottom: 20px;
    }
    button {
      margin: 5px;
      padding: 8px 16px;
      background: #444;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    .hero-card {
      display: inline-block;
      margin: 5px;
      padding: 10px;
      background: #222;
      border: 1px solid #555;
      cursor: pointer;
    }
    .locations-grid {
      display: flex;
      flex-wrap: wrap;
    }
    .locations-grid button {
      margin: 5px;
      padding: 10px;
      background: #222;
      border: 1px solid #555;
      color: #fff;
      cursor: pointer;
    }
    table {
      background: #222;
      color: #fff;
      width: 100%;
      border-collapse: collapse;
    }
    table th, table td {
      border: 1px solid #555;
      padding: 5px;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <section id="intro">
      <h1>–°–∏–ª–∞ –¢–µ–º—Ä—è–≤–∏</h1>
      <p>–ö–æ–ª–∏—Å—å —Å–≤—ñ—Ç –±—É–≤ —Å–ø–æ–∫—ñ–π–Ω–∏–º —ñ –≥–∞—Ä–º–æ–Ω—ñ–π–Ω–∏–º, –∞–ª–µ —Ç—Ä–∏ –°—Ñ–µ—Ä–∏, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–ª–∏ –±–∞–ª–∞–Ω—Å ‚Äî –°–≤—ñ—Ç–ª–æ, –¢–µ–º—Ä—è–≤–∞ —Ç–∞ –†—ñ–≤–Ω–æ–≤–∞–≥–∞ ‚Äî —Ç–µ–ø–µ—Ä –≤—Ä–∞–∑–∏–ª–∏—Å—å —ñ –ø–æ—á–∞–ª–∏ –±–æ—Ä–æ—Ç—å–±—É –∑–∞ –ø–∞–Ω—É–≤–∞–Ω–Ω—è...</p>
      <p>–û–±–µ—Ä–∏ —Å–≤—ñ–π —à–ª—è—Ö —ñ –ø–∞–º'—è—Ç–∞–π: –∫–æ–∂–Ω–µ —Ç–≤–æ—î —Ä—ñ—à–µ–Ω–Ω—è –∑–∞–ª–∏—à–∏—Ç—å —Å–ª—ñ–¥ –Ω–∞ —Ü—å–æ–º—É —Å–≤—ñ—Ç—ñ.</p>
      <button data-next="hero-classes">–†–æ–∑–ø–æ—á–∞—Ç–∏ –ø—Ä–∏–≥–æ–¥—É</button>
    </section>

    <section id="hero-classes" style="display: none;">
      <h2>–í–∏–±—ñ—Ä —à–ª—è—Ö—É</h2>
      <p>–¢–∏ —Å—Ç–æ—ó—à –ø–µ—Ä–µ–¥ –≤–µ–ª–∏–∫–∏–º –≤–∏–±–æ—Ä–æ–º. –ó —è–∫–æ—é —Å–∏–ª–æ—é —Ç–∏ –≤–∏—Ä—É—à–∏—à —É –ø–æ–¥–æ—Ä–æ–∂?</p>
      <div class="hero-card" data-class="–í–æ—ó–Ω">‚öîÔ∏è –í–æ—ó–Ω</div>
      <div class="hero-card" data-class="–ú–∞–≥">üßô –ú–∞–≥</div>
      <div class="hero-card" data-class="–ê—Å–∞—Å–∏–Ω">üïµÔ∏è –ê—Å–∞—Å–∏–Ω</div>
      <div class="hero-card" data-class="–ó–∞—Ö–∏—Å–Ω–∏–∫">üõ°Ô∏è –ó–∞—Ö–∏—Å–Ω–∏–∫</div>
      <div class="hero-card" data-class="–ù–µ–∫—Ä–æ–º–∞–Ω—Ç">üíÄ –ù–µ–∫—Ä–æ–º–∞–Ω—Ç</div>
      <div class="hero-card" data-class="–ú–∏—Å–ª–∏–≤–µ—Ü—å">üèπ –ú–∏—Å–ª–∏–≤–µ—Ü—å</div>
      <div class="hero-card" data-class="–í–µ—Ä—à–Ω–∏–∫ –¥—Ä–∞–∫–æ–Ω—ñ–≤">üêâ –í–µ—Ä—à–Ω–∏–∫ –¥—Ä–∞–∫–æ–Ω—ñ–≤</div>
      <div class="hero-card" data-class="–ß–∞—Ä—ñ–≤–Ω–∏–∫ —á–∞—Å—É">‚è≥ –ß–∞—Ä—ñ–≤–Ω–∏–∫ —á–∞—Å—É</div>
      <button id="choose-class-btn" data-next="chronicles" disabled>–û–±—Ä–∞—Ç–∏ —à–ª—è—Ö</button>
    </section>

    <section id="chronicles" style="display: none;">
      <h2>–Ü—Å—Ç–æ—Ä—ñ—è —Å–≤—ñ—Ç—É</h2>
      <p>–°–≤—ñ—Ç, —è–∫–∏–π —Ç–∏ –∑–Ω–∞—î—à, –¥–∞–≤–Ω–æ –∑–º—ñ–Ω–∏–≤—Å—è...</p>
      <button data-next="companion">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
    </section>

    <section id="companion" style="display: none;">
      <h2>–ó—É—Å—Ç—Ä—ñ—á –∑ —Ç–∞—î–º–Ω–∏—á–∏–º —Å–æ—é–∑–Ω–∏–∫–æ–º</h2>
      <p>–£ —Ç–µ–º–Ω–æ–º—É –ª—ñ—Å—ñ —Ç–∏ –∑–Ω–∞—Ö–æ–¥–∏—à –ø–æ—Ä–∞–Ω–µ–Ω–æ–≥–æ –≤–æ—ó–Ω–∞. –í—ñ–Ω –ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ –¥–æ–ø–æ–º–æ–≥—É.</p>
      <button id="help-companion" data-next="morality-choice">–î–æ–ø–æ–º–æ–≥—Ç–∏</button>
      <button id="leave-companion" data-next="morality-choice">–Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏</button>
    </section>

    <section id="morality-choice" style="display: none;">
      <h2>–í–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è –¥—É—à—ñ</h2>
      <p>–°—Ç–∞—Ä–∏–π –ø—Ä–æ–≤–∏–¥–µ—Ü—å —Å—Ç–∞–≤–∏—Ç—å —Ç–æ–±—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:</p>
      <p><em>"–ß–∏ –≥–æ—Ç–æ–≤–∏–π —Ç–∏ –ø–æ–∂–µ—Ä—Ç–≤—É–≤–∞—Ç–∏ —á–∞—Å—Ç–∏–Ω–æ—é —Å–µ–±–µ –∑–∞—Ä–∞–¥–∏ —ñ–Ω—à–∏—Ö?"</em></p>
      <button id="sacrifice-gold" data-next="prophecy">–ü–æ–∂–µ—Ä—Ç–≤—É–≤–∞—Ç–∏ 50 –∑–æ–ª–æ—Ç–∞</button>
      <button id="refuse-sacrifice" data-next="prophecy">–í—ñ–¥–º–æ–≤–∏—Ç–∏—Å—è</button>
    </section>

    <section id="prophecy" style="display: none;">
      <h2>–ü—Ä–æ—Ä–æ—Ü—Ç–≤–æ –î—Ä–µ–≤–Ω—å–æ–≥–æ</h2>
      <p>"–¢–≤–æ—ó –¥—ñ—ó –≤–∏–∑–Ω–∞—á–∞—Ç—å –¥–æ–ª—é —Ç—Ä—å–æ—Ö —Å–≤—ñ—Ç—ñ–≤. –û–¥–∏–Ω –≤–∏–±—ñ—Ä ‚Äî —ñ —Å–≤—ñ—Ç–ª–æ –∑–≥–∞—Å–Ω–µ... –∞–±–æ –ø–µ—Ä–µ–º–æ–∂–µ."</p>
      <button data-next="internal-conflict">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
    </section>

    <section id="internal-conflict" style="display: none;">
      <h2>–°—É–º–Ω—ñ–≤–∏ –ø–µ—Ä–µ–¥ –±–∏—Ç–≤–æ—é</h2>
      <p>–£ –ø–µ—Ä–µ–¥–¥–µ–Ω—å –≤–∏—Ä—ñ—à–∞–ª—å–Ω–æ—ó –±–∏—Ç–≤–∏ —Ç–µ–±–µ –æ—Ö–æ–ø–ª—é—î —Å—É–º–Ω—ñ–≤. –¢–≤—ñ–π —à–ª—è—Ö –±—É–≤ —Å–∫–ª–∞–¥–Ω–∏–º, –∞–ª–µ –ø–æ–ø–µ—Ä–µ–¥—É ‚Äî –≥–æ–ª–æ–≤–Ω–µ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è.</p>
      <button data-next="event-choices">–ó—É—Å—Ç—Ä—ñ—Ç–∏ –≤–æ—Ä–æ–≥–∞ –∑ –≥–æ—Ä–¥—ñ—Å—Ç—é</button>
      <button data-next="event-choices">–í—ñ–¥–º–æ–≤–∏—Ç–∏—Å—è –≤—ñ–¥ –±–∏—Ç–≤–∏</button>
    </section>

    <section id="event-choices" style="display: none;">
      <h2>–ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–µ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è</h2>
      <p>–¢–∏ –ø–æ—Ç—Ä–∞–ø–∏–≤ —É –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—É —Å–∏—Ç—É–∞—Ü—ñ—é. –Ø–∫ –¥—ñ—è—Ç–∏ –¥–∞–ª—ñ?</p>
      <button data-next="battle">–°—Ö–æ–≤–∞—Ç–∏—Å—è</button>
      <button data-next="battle">–ë–∏—Ç–∏—Å—è</button>
      <button data-next="battle">–í—Ç–µ–∫—Ç–∏</button>
      <button data-next="battle">–ú–∞–≥—ñ—è —á–∞—Å—É</button>
      <button data-next="battle">–°—Ç—Ä–∞—Ç–µ–≥—ñ—è</button>
      <button data-next="battle">–©–∏—Ç —ñ –æ–±–æ—Ä–æ–Ω–∞</button>
    </section>

    <section id="battle" style="display: none;">
      <h2>–ë–∏—Ç–≤–∞ –∑ –ß–µ–º–ø—ñ–æ–Ω–æ–º –ë–µ–∑–æ–¥–Ω—ñ</h2>
      <div id="player-stats"></div>
      <div id="enemy-section"><p>–ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –≤–æ—Ä–æ–≥...</p></div>
      <button id="attack-button">–ê—Ç–∞–∫—É–≤–∞—Ç–∏</button>
      <button id="npc-button">–ü–æ–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑ NPC</button>
      <button data-next="alchemy">–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑—ñ–ª–ª—è</button>
      <button id="end-button">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –≥—Ä—É</button>
      <div id="battle-result"></div>
    </section>

    <section id="alchemy" style="display: none;">
      <h2>–ê–ª—Ö—ñ–º—ñ—á–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è</h2>
      <p>–ö–æ–º–±—ñ–Ω—É–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:</p>
      <select>
        <option>–¢—ñ–Ω—å–æ–≤–∏–π –≥—Ä–∏–±</option>
        <option>–ö—Ä–æ–≤ —Ñ–µ–Ω—ñ–∫—Å–∞</option>
      </select>
      <select>
        <option>–ö—Ä–∏—Å—Ç–∞–ª –±–æ–ª—é</option>
        <option>–ï–ª—ñ–∫—Å–∏—Ä –≤—ñ—á–Ω–æ–≥–æ –∂–∏—Ç—Ç—è</option>
      </select>
      <button data-next="ending">–ó–º—ñ—à–∞—Ç–∏</button>
    </section>

    <section id="ending" style="display: none;">
      <h2>–§—ñ–Ω–∞–ª</h2>
      <p>–¢–∏ –∑–∞–≤–µ—Ä—à–∏–≤ —Å–≤–æ—é –ø—Ä–∏–≥–æ–¥—É —è–∫ <span id="final-class"></span> —ñ –æ–±—Ä–∞–≤ —Å–≤–æ—é –¥–æ–ª—é...</p>
      <h3>–¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤</h3>
      <table id="leaderboard">
        <thead><tr><th>–ì—Ä–∞–≤–µ—Ü—å</th><th>–†—ñ–≤–µ–Ω—å</th></tr></thead>
        <tbody></tbody>
      </table>
      <button onclick="location.reload()">–ì—Ä–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
    </section>
  </div>

  <script>
    
    let player = {
      name: '–ì—Ä–∞–≤–µ—Ü—å',
      class: null,
      hp: 100,
      maxHp: 100,
      attack: 10,
      defense: 5,
      gold: 100,
      level: 1,
      xp: 0,
      inventory: [],
      completedQuests: [],
      position: { x: 0, y: 0 },
      equippedItems: { weapon: null, armor: null, accessory: null },
      classBonuses: {} 
    };

    const heroClasses = {
      '–í–æ—ó–Ω': { attack: 5, defense: 3, hpBonus: 20 },
      '–ú–∞–≥': { attack: 3, defense: 2, hpBonus: 10 },
      '–ê—Å–∞—Å–∏–Ω': { attack: 8, defense: 1, hpBonus: 15 },
      '–ó–∞—Ö–∏—Å–Ω–∏–∫': { attack: 4, defense: 6, hpBonus: 30 },
      '–ù–µ–∫—Ä–æ–º–∞–Ω—Ç': { attack: 6, defense: 3, hpBonus: 10 },
      '–ú–∏—Å–ª–∏–≤–µ—Ü—å': { attack: 7, defense: 2, hpBonus: 12 },
      '–í–µ—Ä—à–Ω–∏–∫ –¥—Ä–∞–∫–æ–Ω—ñ–≤': { attack: 10, defense: 5, hpBonus: 50 },
      '–ß–∞—Ä—ñ–≤–Ω–∏–∫ —á–∞—Å—É': { attack: 5, defense: 3, hpBonus: 25 }
    };

    const enemies = [
      { name: "–û—Ä–∫", hp: 50, attack: 8, defense: 2, goldReward: 30 },
      { name: "–ì–æ–±–ª—ñ–Ω", hp: 30, attack: 5, defense: 1, goldReward: 20 },
      { name: "–î—Ä–∞–∫–æ–Ω", hp: 200, attack: 25, defense: 10, goldReward: 100 },
      { name: "–ß–µ–º–ø—ñ–æ–Ω –ë–µ–∑–æ–¥–Ω—ñ", hp: 400, attack: 40, defense: 15, goldReward: 200 }
    ];

    let enemy = null;
    function generateEnemy() {
      enemy = enemies[Math.floor(Math.random() * enemies.length)];
      document.getElementById('enemy-section').querySelector('p').textContent =
        `–Ü–º'—è: ${enemy.name}, HP: ${enemy.hp}`;
      updateStats();
    }

    function attackEnemy() {
      if (!enemy) return;
      const damage = Math.max(0, Math.floor(Math.random() * player.attack) - enemy.defense);
      enemy.hp -= damage;
      logBattle(`–¢–∏ –Ω–∞–Ω—ñ—Å ${damage} —à–∫–æ–¥–∏ –≤–æ—Ä–æ–≥—É.`);
      if (enemy.hp <= 0) winBattle();
      else enemyAttack();
    }

    function enemyAttack() {
      const damage = Math.max(0, Math.floor(Math.random() * enemy.attack) - player.defense);
      player.hp -= damage;
      logBattle(`–í–æ—Ä–æ–≥ –Ω–∞–Ω—ñ—Å ${damage} —à–∫–æ–¥–∏ —Ç–æ–±—ñ.`);
      if (player.hp <= 0) endGame();
      updateStats();
    }

    function winBattle() {
      player.gold += enemy.goldReward;
      player.xp += 10;
      logBattle(`–¢–∏ –ø–µ—Ä–µ–º—ñ–≥ –≤–æ—Ä–æ–≥–∞! –ó–æ–ª–æ—Ç–æ: ${enemy.goldReward}, XP: 10`);
      checkLevelUp();
      generateEnemy();
    }

    function checkLevelUp() {
      const neededXp = player.level * 100;
      if (player.xp >= neededXp) {
        player.level++;
        player.attack += 5;
        player.defense += 2;
        player.maxHp += 20;
        player.hp = player.maxHp;
        player.xp = 0;
        logBattle(`–ù–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å: ${player.level}`);
      }
    }

    function updateStats() {
      document.getElementById('player-stats').textContent =
        `HP: ${player.hp}/${player.maxHp}, –†—ñ–≤–µ–Ω—å: ${player.level}, XP: ${player.xp}, –ó–æ–ª–æ—Ç–æ: ${player.gold}`;
    }

    function logBattle(msg) {
      const p = document.createElement('p');
      p.textContent = msg;
      document.getElementById('battle-result').appendChild(p);
    }

    function endGame() {
      document.getElementById('battle').style.display = 'none';
      document.getElementById('ending').style.display = 'block';
      document.getElementById('final-class').textContent = player.class;
      updateLeaderboard();
    }

    function updateLeaderboard() {
      const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
      leaderboard.push({ name: player.name, level: player.level });
      leaderboard.sort((a, b) => b.level - a.level);
      localStorage.setItem('leaderboard', JSON.stringify(leaderboard));

      const tbody = document.querySelector('#leaderboard tbody');
      tbody.innerHTML = '';
      leaderboard.forEach(e => {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${e.name}</td><td>${e.level}</td>`;
        tbody.appendChild(row);
      });
    }

    let selectedClass = null;
    document.querySelectorAll('.hero-card').forEach(card => {
      card.addEventListener('click', () => {
        selectedClass = card.dataset.class;
        player.class = selectedClass;
        player.attack += heroClasses[selectedClass].attack;
        player.defense += heroClasses[selectedClass].defense;
        player.maxHp += heroClasses[selectedClass].hpBonus;
        player.hp = player.maxHp;
        document.getElementById('choose-class-btn').disabled = false;
        document.querySelectorAll('.hero-card').forEach(c => c.style.border = '1px solid #555');
        card.style.border = '2px solid yellow';
      });
    });

    document.querySelectorAll('[data-next]').forEach(button => {
      button.addEventListener('click', () => {
        const current = button.closest('section');
        const next = document.getElementById(button.dataset.next);
        if (current && next) {
          current.style.display = 'none';
          next.style.display = 'block';
          if (button.dataset.next === 'battle') generateEnemy();
        }
      });
    });

    document.getElementById('attack-button').addEventListener('click', attackEnemy);
    document.getElementById('npc-button').addEventListener('click', () => alert('–¢–∏ –ø–æ–≥–æ–≤–æ—Ä–∏–≤ –∑ NPC!'));
    document.getElementById('end-button').addEventListener('click', endGame);
  </script>
</body>
</html>
